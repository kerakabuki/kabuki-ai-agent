<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DEBUG - Serifu Page</title>
<style>
body { font-family: sans-serif; padding: 20px; background: #f0f0f0; }
.section { background: white; padding: 15px; margin: 10px 0; border-radius: 5px; }
.phrase { padding: 10px; margin: 5px 0; border-left: 3px solid #ccc; background: #fafafa; }
.phrase.visible { background: #ffffcc; border-left-color: #ff9900; }
.error { color: red; font-weight: bold; }
.success { color: green; font-weight: bold; }
</style>
</head>
<body>
<h1>üé≠ Serifu Page Debug</h1>

<div class="section">
  <h2>Step 1: Check if page loads</h2>
  <p class="success">‚úì HTML loaded successfully</p>
</div>

<div class="section">
  <h2>Step 2: Test CUES data</h2>
  <div id="cues-test"></div>
</div>

<div class="section">
  <h2>Step 3: Test phrase rendering</h2>
  <div id="phrase-test"></div>
</div>

<div class="section">
  <h2>Step 4: Console Errors</h2>
  <div id="console-errors">
    <p>Check browser console (F12) for JavaScript errors</p>
  </div>
</div>

<div class="section">
  <h2>Step 5: Simulated Lyrics Display</h2>
  <div id="simulated-lyrics"></div>
</div>

<script>
// Test CUES data
const CUES = [
  { time: 9.1, end: 18.5, type: "serifu", text: "Áü•„Çâ„Åñ„ÅÇË®Ä„Å£„Å¶ËÅû„Åã„Åõ„ÇÑ„Åó„Çá„ÅÜ", reading: "„Åó„Çâ„Åñ„ÅÅ„ÅÑ„Å£„Å¶„ÄÄ„Åç„Åã„Åõ„ÇÑ„Åó„Çá„ÅÜ",
    charTimings: [0, 0.44, 0.60, 0.99, 1.38, 2.02, 2.94, 6.32, 6.54, 7.06, 7.23, 7.40, 8.06, 8.22] },
  { time: 19.3, type: "pause" },
  { time: 30.5, end: 34.5, type: "serifu", text: "Êµú„ÅÆÁúüÁ†Ç„Å®‰∫îÂè≥Ë°õÈñÄ„Åå", reading: "„ÅØ„Åæ„ÅÆ„Åæ„Åï„Åî„Å®„Åî„Åà„ÇÇ„Çì„Åå",
    charTimings: [0.40, 1.00, 1.18, 1.48, 1.62, 1.88, 2.06, 2.36, 2.64, 2.84] },
];

// Step 2: Display CUES
const cuesDiv = document.getElementById('cues-test');
if (CUES && CUES.length > 0) {
  cuesDiv.innerHTML = `<p class="success">‚úì CUES loaded: ${CUES.length} items</p>
    <pre>${JSON.stringify(CUES.slice(0, 2), null, 2)}</pre>`;
} else {
  cuesDiv.innerHTML = '<p class="error">‚úó CUES data is empty or missing</p>';
}

// Step 3: Test phrase rendering
const phraseDiv = document.getElementById('phrase-test');
let phraseHTML = '';
CUES.forEach((cue, i) => {
  if (cue.type === 'serifu') {
    phraseHTML += `<div class="phrase visible">
      <strong>#${i}</strong> ${cue.text}<br>
      <small>${cue.reading}</small>
    </div>`;
  } else if (cue.type === 'pause') {
    phraseHTML += '<div class="phrase">„Éª„Éª„Éª</div>';
  }
});
phraseDiv.innerHTML = phraseHTML || '<p class="error">‚úó No phrases rendered</p>';

// Step 5: Simulated lyrics display (what should appear on the page)
const lyricsDiv = document.getElementById('simulated-lyrics');
lyricsDiv.innerHTML = `
  <p><strong>Expected display below video:</strong></p>
  <div style="background: #0c0a0e; color: #efe8df; padding: 20px; border-radius: 8px;">
    <h3 style="color: #d4a84b; font-size: 14px;">Âè∞Ë©û</h3>
    ${phraseHTML}
  </div>
`;

// Capture console errors
window.addEventListener('error', function(e) {
  const errDiv = document.getElementById('console-errors');
  errDiv.innerHTML += `<p class="error">Error: ${e.message} at ${e.filename}:${e.lineno}</p>`;
});

console.log('‚úì Debug script loaded successfully');
console.log('CUES:', CUES);
</script>
</body>
</html>
